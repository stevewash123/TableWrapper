<main class="main">
  <div class="header">
    <h1>{{ title }}</h1>

    <div class="header-actions">
      <button nz-button nzType="primary" nzSize="large" (click)="showArchitectureDialog()">
        ‚ÑπÔ∏è
        How It Works
      </button>
    </div>

    <div class="table-selector">
      <label for="tableSelect" class="table-selector-label">Select a Table:</label>
      <nz-select
        id="tableSelect"
        [(ngModel)]="selectedTable"
        (ngModelChange)="onTableChange($event)"
        nzPlaceHolder="Choose a Northwind table"
        nzSize="large"
        class="table-dropdown">
        @for (option of tableOptions; track option.value) {
          <nz-option
            [nzValue]="option.value"
            [nzLabel]="option.label">
          </nz-option>
        }
      </nz-select>
    </div>
  </div>

  <div class="content">
    <!-- Configuration Panel -->
    <div class="config-panel">
      @if (activeDemo === 'users') {
        <column-config-panel
          [columns]="userColumns">
        </column-config-panel>
      }
      @if (activeDemo === 'products') {
        <column-config-panel
          [columns]="productColumns">
        </column-config-panel>
      }
    </div>

    <!-- Grid Section -->
    <div class="grid-section">
      <!-- Users Demo -->
      @if (activeDemo === 'users') {
        <div class="demo-section">
          <h2>{{ getSelectedTableLabel() }} - Declarative Configuration Demo</h2>
          <paged-grid
            [gridColumns]="userColumns"
            [data]="userData"
            [totalCount]="userTotalCount"
            [loading]="userLoading"
            [optionLists]="optionLists"
            [allowRowSelection]="true"
            (onDataRequested)="onUserDataRequested($event)"
            (onRowSelect)="onUserRowSelect($event)">
          </paged-grid>
        </div>
      }

      <!-- Products Demo -->
      @if (activeDemo === 'products') {
        <div class="demo-section">
          <h2>{{ getSelectedTableLabel() }} - Multi-type Display Demo</h2>
          <paged-grid
            [gridColumns]="productColumns"
            [data]="productData"
            [totalCount]="productTotalCount"
            [loading]="productLoading"
            [optionLists]="optionLists"
            [allowRowSelection]="false"
            (onDataRequested)="onProductDataRequested($event)"
            (onRowSelect)="onProductRowSelect($event)">
          </paged-grid>
        </div>
      }
    </div>
  </div>

  <div class="features">
    <h3>Key Features Demonstrated</h3>
    <div class="feature-grid">
      <div class="feature">
        <h4>üîß Declarative Configuration</h4>
        <p>ColumnStructure[] array defines all behavior - sorting, filtering, display types</p>
      </div>
      <div class="feature">
        <h4>‚ö° Server-side Operations</h4>
        <p>Pagination, multi-column sorting, and filtering handled via PageRequest emissions</p>
      </div>
      <div class="feature">
        <h4>üé® Multiple Display Types</h4>
        <p>Text, number, date, checkbox, links, dropdown - all configurable</p>
      </div>
      <div class="feature">
        <h4>üîç Smart Filtering</h4>
        <p>Text, dropdown, date filters with debouncing and match mode controls</p>
      </div>
      <div class="feature">
        <h4>üìä Type Safety</h4>
        <p>Generic PagedGrid&lt;T&gt; ensures compile-time type checking</p>
      </div>
      <div class="feature">
        <h4>üöÄ Massive Code Reduction</h4>
        <p>One component replaces 25+ table implementations (8000+ lines saved)</p>
      </div>
    </div>
  </div>
</main>